"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var QxRequest=function QxRequest(method,url,params){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200){resolve(JSON.parse(xhr.responseText))}else{reject(xhr.status)}}};if(method==="get"||method==="GET"){if(_typeof(params)==="object"){params=Object.keys(params).map(function(key){return encodeURIComponent(key)+"="+encodeURIComponent(params[key])}).join("&")}url=params?url+"?"+params:url;xhr.open(method,url,true);xhr.timeout=8000;xhr.ontimeout=function(e){window.alert("\u767B\u5F55\u8D85\u65F6")};xhr.send()}if(method==="post"||method==="POST"){xhr.open(method,url,true);xhr.setRequestHeader("Accept","*/*");xhr.timeout=8000;xhr.ontimeout=function(e){window.alert("\u767B\u5F55\u8D85\u65F6")};xhr.send(JSON.stringify(params))}})};var xml2json=function xml2json(val){var x2js=new X2JS;return x2js.xml_str2json(val)};var QxRequestXML=function QxRequestXML(method,url,params){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200){var responseText=xml2json(xhr.responseText);resolve(responseText)}else{reject(xhr.status)}}};if(method==="post"||method==="POST"){xhr.open(method,url,true);xhr.setRequestHeader("Accept","*/*");xhr.send(JSON.stringify(params))}})};var QxRequestXML2=function QxRequestXML2(method,url,params){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status===200){resolve(xhr.responseText)}else{reject(xhr.status)}}};if(method==="post"||method==="POST"){xhr.open(method,url,true);xhr.setRequestHeader("Accept","*/*");xhr.send(JSON.stringify(params))}})};var base_url="http://127.0.0.1:9585/icvs2/";var webcu2plugin={login:function login(params){return QxRequest("post","".concat(base_url,"login"),params)},getDeviceList:function getDeviceList(params){return QxRequest("get","".concat(base_url,"CAS/C_CAS_QueryPUIDSets"),params)},getDeviceByPuid:function getDeviceByPuid(params){return QxRequest("get","".concat(base_url,"C_CAS_QueryPUIDRes"),params)},getPlayVideoId:function getPlayVideoId(params){return QxRequest("get","".concat(base_url,"video/startVideo2"),params)},ptzControl:function ptzControl(params){var puid=params.puid||"";var idx=params.idx||0;var control=params.control||"";var speed=params.speed||"";var xml="";var token=params.token;if(!puid||!control){return}if(control==="left"||control==="up"||control==="right"||control==="down"||control==="stop"){var _params={puid:puid,motion:control,idx:idx,token:token,speed:speed};return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_Turn"),_params)}if(control==="zoomin"){var _params2={speed:speed,puid:puid,idx:idx,token:token};return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_ZoomInPicture"),_params2)}if(control==="zoomout"){var _params3={speed:speed,puid:puid,idx:idx,token:token};return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_ZoomOutPicture"),_params3)}if(control==="stopzoom"){var _params4={speed:speed,puid:puid,idx:idx,token:token};return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_StopPictureZoom"),_params4)}if(control==="focusfar"){var _params5={speed:speed,puid:puid,idx:idx,token:token};return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_MakeFocusFar"),_params5)}if(control==="focusnear"){var _params6={speed:speed,puid:puid,idx:idx,token:token};return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_MakeFocusNear"),_params6)}if(control==="stopfocus"){var _params7={speed:speed,puid:puid,idx:idx,token:token};return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_StopFocusMove"),_params7)}if(control==="augment"){xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?><M Type=\"ComReq\"><C Type=\"G\" Prio=\"1\" EPID=\"system\" Lang=\"zh_CN\"> <Res Type=\"IV\" Idx=\""+idx+"\" OptID=\"C_PTZ_AugmentAperture\" Stream=\"0\"><Param></Param></Res></C></M>";var url="".concat(base_url,"RawRequest?dstType=201&dstID=").concat(puid,"&token=").concat(token);var _params8={xml:xml};return QxRequestXML("post",url,_params8)}if(control==="minish"){xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?><M Type=\"ComReq\"><C Type=\"G\" Prio=\"1\" EPID=\"system\" Lang=\"zh_CN\"><Res Type=\"IV\" Idx=\""+idx+"\" OptID=\"C_PTZ_MinishAperture\" Stream=\"0\"><Param></Param></Res></C></M>";var _url="".concat(base_url,"RawRequest?dstType=201&dstID=").concat(puid,"&token=").concat(token);var _params9={xml:xml};return QxRequestXML("post",_url,_params9)}if(control==="stopaperture"){xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?><M Type=\"ComReq\"><C Type=\"G\" Prio=\"1\" EPID=\"system\" Lang=\"zh_CN\"><Res Type=\"IV\" Idx=\""+idx+"\" OptID=\"C_PTZ_StopApertureZoom\" Stream=\"0\"><Param></Param></Res></C></M>";var _url2="".concat(base_url,"RawRequest?dstType=201&dstID=").concat(puid,"&token=").concat(token);var _params10={xml:xml};return QxRequestXML("post",_url2,_params10)}},getPresetPosList:function getPresetPosList(query){return _asyncToGenerator(regeneratorRuntime.mark(function _callee(){var result,idx,puid,token,xml,url,params,data;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:result={code:-1,rows:[]};idx=query.idx||"0";puid=query.puid||"";token=query.token||"";xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <M Type=\"ComReq\">\n      <C Type=\"G\" Prio=\"1\" EPID=\"system\" Lang=\"zh_CN\">\n        <Res Type=\"PTZ\" Idx=\"".concat(idx,"\" OptID=\"F_PTZ_PresetPositionSets\" Stream=\"0\"><Param></Param></Res>\n      </C>\n    </M>");url="".concat(base_url,"RawRequest?dstType=201&dstID=").concat(puid,"&token=").concat(token);params={xml:xml};_context.next=9;return QxRequestXML("post",url,params);case 9:data=_context.sent;try{result.rows=data.M.C.Res.Param.Preset;result.code=data.M.C._SPError}catch(error){result.msg="fail"}return _context.abrupt("return",result);case 12:case"end":return _context.stop();}}},_callee)}))()},setPresetPos:function setPresetPos(params){return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_SetPresetPos"),params)},moveToPresetPos:function moveToPresetPos(params){return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_MoveToPresetPos"),params)},gotoOriginalPresetPos:function gotoOriginalPresetPos(params){return QxRequest("post","".concat(base_url,"PTZ/C_PTZ_GotoOriginalPresetPos"),params)},startCloudSnapshot:function startCloudSnapshot(params){return QxRequest("post","".concat(base_url,"CSS/C_CSS_StartManualSnapshot"),params)},startCloudStorage:function startCloudStorage(params){return QxRequest("post","".concat(base_url,"CSS/C_CSS_StartManualStorage"),params)},stopCloudStorage:function stopCloudStorage(params){return QxRequest("post","".concat(base_url,"CSS/C_CSS_StopManualStorage"),params)},startSGSnapshot:function startSGSnapshot(params){return QxRequest("get","".concat(base_url,"SG/C_SG_StartSnapshot"),params)},startSGStorage:function startSGStorage(params){params.IVIdx=params.idx||"0";return QxRequest("get","".concat(base_url,"SG/VODFile.flv"),params)},startTalk:function startTalk(params){return QxRequest("get","".concat(base_url,"audio/startTalk2"),params)},startCall:function startCall(params){return QxRequest("get","".concat(base_url,"audio/startCall2"),params)},stoptStream:function stoptStream(params){return QxRequest("get","".concat(base_url,"stopPlay2"),params)},enablePlayAudio:function enablePlayAudio(params){return QxRequest("get","".concat(base_url,"enablePlayAudio"),params)},startLocalSnap:function startLocalSnap(params){return QxRequest("get","".concat(base_url,"localSnapshot2"),params)},startLocalSnapShot:function startLocalSnapShot(params){return QxRequest("get","".concat(base_url,"localSerialSnapshot2"),params)},stopLocalSnapShot:function stopLocalSnapShot(params){return QxRequest("get","".concat(base_url,"cancelLocalSerialSnapshot2"),params)},startLocalVideo:function startLocalVideo(params){return QxRequest("get","".concat(base_url,"localRecord2"),params)},stopLocalVideo:function stopLocalVideo(params){return QxRequest("get","".concat(base_url,"CancelLocalRecord2"),params)},getCloudFile:function getCloudFile(params){return QxRequest("get","".concat(base_url,"CSS/C_CSS_QueryStorageFiles"),params)},getDeviceFile:function getDeviceFile(params){return QxRequest("get","".concat(base_url,"SG/C_SG_QueryRecordFiles"),params)},downloadCloudFile:function downloadCloudFile(params){return QxRequest("get","".concat(base_url,"downloadCloudFile2"),params)},downloadDeviceFile:function downloadDeviceFile(params){return QxRequest("get","".concat(base_url,"downloadDeviceFile2"),params)},setPuaseDownload:function setPuaseDownload(params){return QxRequest("get","".concat(base_url,"puaseDownload2"),params)},setRestoreDownload:function setRestoreDownload(params){return QxRequest("get","".concat(base_url,"restoreDownload2"),params)},setStopDownload:function setStopDownload(params){return QxRequest("get","".concat(base_url,"stopDownload2"),params)},getVodCloudFile:function getVodCloudFile(params){return QxRequest("get","".concat(base_url,"vodCloudFile2"),params)},getVodDeviceFile:function getVodDeviceFile(params){return QxRequest("get","".concat(base_url,"vodDeviceFile2"),params)},setPuaseVod:function setPuaseVod(params){return QxRequest("get","".concat(base_url,"puaseVod2"),params)},setRestoreVod:function setRestoreVod(params){return QxRequest("get","".concat(base_url,"restoreVod2"),params)},setSpeedVod:function setSpeedVod(params){return QxRequest("get","".concat(base_url,"setVodSpeed2"),params)},setOffsetVod:function setOffsetVod(params){return QxRequest("get","".concat(base_url,"setVodOffset2"),params)},subscriptionGps:function subscriptionGps(params){var token=params.token;var epid=params.epid||"";var puid=params.puid||"";var idx=params.idx||0;var xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?><M Type=\"ComReq\"><C Type=\"C\" EPID=\""+epid+"\"><Res Type=\"ST\" Idx=\""+idx+"\" OptID=\"C_GS_SubscribeGPSData\"><Param></Param></Res></C><OSets><Res OType=\"201\" OID=\""+puid+"\" Type=\"GPS\" Idx=\""+idx+"\"></Res></OSets></M>";var url=base_url+"RawRequest?dstType=33&token="+token;var params1={xml:xml};return QxRequestXML2("POST",url,params1)},getPuidLastGps:function getPuidLastGps(params){var token=params.token;var puid=params.puid||[];var epid=params.epid||"";var Osets="<OSets>";Osets+="<Res OType=\"201\" OID=\""+puid+"\" Type=\"GPS\" Idx=\"0\"></Res>";Osets+="</OSets>";var xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?><M Type=\"ComReq\"><C Type=\"C\" EPID=\""+epid+"\"><Res Type=\"ST\" Idx=\"0\" OptID=\"C_GS_QueryLastGPSData\"><Param></Param></Res></C>"+Osets+"</M>";var url=base_url+"RawRequest?dstType=33&dstID=\"\"&token="+token;var params1={xml:xml};return QxRequestXML2("POST",url,params1)},getPuidHistoryGps:function getPuidHistoryGps(params){var token=params.token;var offset=params.offset||0;var count=params.count||100;var begin=params.begin;var end=params.end;var puid=params.puid;var epid=params.epid||"";var Osets="<OSets>";Osets+="<Res OType=\"201\" OID=\""+puid+"\" Type=\"ST\" Idx=\"0\"></Res>";Osets+="</OSets>";var xml="<?xml version=\"1.0\" encoding=\"UTF-8\"?><M Type=\"ComReq\"><C Type=\"C\" EPID=\""+epid+"\"><Res Type=\"ST\" Idx=\"0\" OptID=\"C_GS_QueryHistoryGPSData\"><Param  Offset=\""+offset+"\" Count=\""+count+"\" Begin=\""+begin+"\" End=\""+end+"\"></Param></Res></C>"+Osets+"</M>";var url=base_url+"RawRequest?dstType=33&dstID=\"\"&token="+token;var params1={xml:xml};return QxRequestXML2("POST",url,params1)}};define("main",[],function(){});